{"version":3,"sources":["webpack:///./src/sandbox/eval/transpilers/babel/worker/index.ts","webpack:///../codesandbox-api/dist/codesandbox.es5.js","webpack:///../common/lib/templates/helpers/is-server.js","webpack:///../common/lib/utils/url-generator.js","webpack:///../common/lib/utils/url-generator/dashboard.js","webpack:///../sandbox-hooks/preview-secret.js"],"names":["module","exports","Worker","transformers","transformError","error","modules","map","c","filter","x","clearErrorTransformers","length","registerErrorTransformer","check","push","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","generateId","Math","floor","random","Protocol","type","handleMessage","target","_this","outgoingMessages","Set","_messageListener","data","returnMessage","_a","$type","getTypeId","has","$id","$data","$originId","internalId","source","postMessage","_postMessage","createConnection","isWorker","constructor","name","getConstructorName","prototype","self","addEventListener","dispose","removeEventListener","sendMessage","messageId","message","add","listenFunction","m","DedicatedWorkerGlobalScope","notifications","Object","freeze","show","title","notificationType","timeAlive","action","editor","openModule","id","lineNumber","column","path","dependencies","dependencyName","dependency","rename","actions","line","lineEnd","columnEnd","payload","severity","clear","correction","_b","_c","_d","glyph","className","host$1","process","__assign","assign","s","i","arguments","p","hasOwnProperty","bundlers","Map","resolveIframeHandshake","isStandalone","window","location","href","indexOf","opener","parent","iframeHandshakeDone","iframeHandshake","parentOrigin","parentId","parentOriginListener","origin","resetState","dispatch","newMessage","codesandbox","notifyListeners","rawMessage","JSON","parse","stringify","forEach","frame","notifyFrames","listeners","listenerId","listen","callback","keys","eventListener","registerFrame","bundlerId","set","document","reattach","defineProperty","isServer","SERVER_TEMPLATE_NAMES","template","__createBinding","create","o","k","k2","undefined","enumerable","get","__setModuleDefault","__importStar","mod","__esModule","v2DraftBranchUrl","v2DefaultBranchUrl","dashboard","teamInviteLink","docsUrl","getSandboxId","privacyUrl","tosUrl","curatorUrl","searchUrl","gitHubToProjectsUrl","gitHubToSandboxUrl","optionsToParameterizedUrl","githubRepoUrl","profileLikesUrl","profileSandboxesUrl","teamOverviewUrl","exploreUrl","dashboardUrl","profileUrl","signInVercelUrl","signInUrl","signInPageUrl","forkSandboxUrl","frameUrl","embedUrl","v2BranchUrl","sandboxUrl","v2EditorUrl","editorUrl","uploadFromCliUrl","newCxJSSandboxUrl","newAngularSandboxUrl","newSvelteSandboxUrl","importFromGitHubUrl","newVueSandboxUrl","newPreactSandboxUrl","newDojoSandboxUrl","newReactTypeScriptSandboxUrl","parcelSandboxUrl","newSandboxUrl","newSandboxWizard","protocolAndHost","host","CSBProjectGitHubRepository","gitHubRepoPattern","is_server_1","gitHubPrefix","dotGit","sandboxHost","owner","repo","buildEncodedUri","strings","values","encodeURIComponent","join","split","protocol","sandboxGitUrl","git","username","branch","sandboxDetails","baseUrl","isV2","alias","branchDetails","branchName","project","repository","sandbox","append","useFallbackDomain","port","substr","templateIsServer","sHost","redirectTo","url","extraScopes","teamId","page","options","keyValues","sort","a","key","githubUrl","replace","query","csbHost","Boolean","tryHost","hostRegex","sandboxRegex","RegExp","matches","match","Error","inviteToken","qsObject","searchParams","URLSearchParams","toString","appendTeamIdQueryParam","discoverSearch","discover","search","permissionSettings","registrySettings","settings","liked","shared","deleted","recent","templates","syncedSandboxes","repositories","myContributions","drafts","sandboxes","ALL_SANDBOXES_URL_PREFIX","DASHBOARD_URL_PREFIX","sanitizePath","includes","albumId","getPreviewSecret","cookie","setPreviewSecret","secret","cookieValue","setTimeout","reload","getPopupDimensions","width","height","wLeft","screenLeft","screenX","wTop","screenTop","screenY","left","innerWidth","top","innerHeight","getPopupOffset","listener","previewSecret","sandboxId","endsWith","popup","open","setInterval","close"],"mappings":"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","file":"static/js/default~sandbox~sandbox-startup.e12de0d41.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(\"/\" + \"babel-transpiler.690d306a.worker.js\");\n};","var transformers = [];\nfunction transformError(error, module, modules) {\n    var transformedErrors = transformers.map(function (c) { return c(error, module, modules); }).filter(function (x) { return x != null; });\n    return transformedErrors[0];\n}\nfunction clearErrorTransformers() {\n    transformers.length = 0;\n}\nfunction registerErrorTransformer(check) {\n    transformers.push(check);\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar generateId = function () {\n    // Such a random ID\n    return Math.floor(Math.random() * 1000000 + Math.random() * 1000000);\n};\nvar getConstructorName = function (x) {\n    try {\n        return x.constructor.name;\n    }\n    catch (e) {\n        return '';\n    }\n};\nvar Protocol = /** @class */ (function () {\n    function Protocol(type, handleMessage, target) {\n        var _this = this;\n        this.type = type;\n        this.handleMessage = handleMessage;\n        this.target = target;\n        this.outgoingMessages = new Set();\n        this._messageListener = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            var data, result, returnMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        data = e.data;\n                        if (data.$type !== this.getTypeId()) {\n                            return [2 /*return*/];\n                        }\n                        // We are getting a response to the message\n                        if (this.outgoingMessages.has(data.$id)) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.handleMessage(data.$data)];\n                    case 1:\n                        result = _a.sent();\n                        returnMessage = {\n                            $originId: this.internalId,\n                            $type: this.getTypeId(),\n                            $data: result,\n                            $id: data.$id,\n                        };\n                        if (e.source) {\n                            // @ts-ignore\n                            e.source.postMessage(returnMessage, '*');\n                        }\n                        else {\n                            this._postMessage(returnMessage);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        this.createConnection();\n        this.internalId = generateId();\n        this.isWorker = getConstructorName(target) === 'Worker';\n    }\n    Protocol.prototype.getTypeId = function () {\n        return \"p-\" + this.type;\n    };\n    Protocol.prototype.createConnection = function () {\n        self.addEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.dispose = function () {\n        self.removeEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.sendMessage = function (data) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var messageId = generateId();\n            var message = {\n                $originId: _this.internalId,\n                $type: _this.getTypeId(),\n                $data: data,\n                $id: messageId,\n            };\n            _this.outgoingMessages.add(messageId);\n            var listenFunction = function (e) {\n                var data = e.data;\n                if (data.$type === _this.getTypeId() &&\n                    data.$id === messageId &&\n                    data.$originId !== _this.internalId) {\n                    resolve(data.$data);\n                    self.removeEventListener('message', listenFunction);\n                }\n            };\n            self.addEventListener('message', listenFunction);\n            _this._postMessage(message);\n        });\n    };\n    Protocol.prototype._postMessage = function (m) {\n        if (this.isWorker ||\n            // @ts-ignore Unknown to TS\n            (typeof DedicatedWorkerGlobalScope !== 'undefined' &&\n                // @ts-ignore Unknown to TS\n                this.target instanceof DedicatedWorkerGlobalScope)) {\n            // @ts-ignore\n            this.target.postMessage(m);\n        }\n        else {\n            this.target.postMessage(m, '*');\n        }\n    };\n    return Protocol;\n}());\n\n/**\n * Returns an action that describes to open a notification in the editor\n *\n * @export\n * @param {string} title\n * @param {('notice' | 'warning' | 'error' | 'success')} [notificationType='notice']\n * @param {number} [timeAlive=2] How long the notification should show in seconds\n * @returns {NotificationAction}\n */\nfunction show(title, notificationType, timeAlive) {\n    if (notificationType === void 0) { notificationType = 'notice'; }\n    if (timeAlive === void 0) { timeAlive = 2; }\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'notification',\n        title: title,\n        notificationType: notificationType,\n        timeAlive: timeAlive,\n    };\n}\n\n\nvar notifications = Object.freeze({\n\tshow: show\n});\n\nfunction openModule(id, lineNumber, column) {\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'editor.open-module',\n        path: id,\n        lineNumber: lineNumber,\n        column: column,\n    };\n}\n\n\nvar editor = Object.freeze({\n\topenModule: openModule\n});\n\nfunction add(dependencyName) {\n    return {\n        type: 'action',\n        action: 'source.dependencies.add',\n        dependency: dependencyName,\n    };\n}\n\n\nvar d = Object.freeze({\n\tadd: add\n});\n\nfunction rename(path, title) {\n    return {\n        type: 'action',\n        action: 'source.module.rename',\n        path: path,\n        title: title,\n    };\n}\n\n\nvar m = Object.freeze({\n\trename: rename\n});\n\nvar dependencies = d;\nvar modules = m;\n\n\nvar source = Object.freeze({\n\tdependencies: dependencies,\n\tmodules: modules\n});\n\n/**\n * Returns an action that describes to show an error\n * in the code of the editor (with the red squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {ErrorOptions} { line, column, path, payload }\n * @returns {ErrorAction}\n */\nfunction show$1(title, message, _a) {\n    var line = _a.line, column = _a.column, lineEnd = _a.lineEnd, columnEnd = _a.columnEnd, path = _a.path, payload = _a.payload, source = _a.source;\n    return {\n        title: title,\n        message: message,\n        line: line,\n        column: column,\n        path: path,\n        payload: payload,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        severity: 'error',\n        type: 'action',\n        action: 'show-error',\n        source: source || 'browser',\n    };\n}\nfunction clear(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-errors',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar error = Object.freeze({\n\tshow: show$1,\n\tclear: clear\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$2(message, _a) {\n    var _b = _a === void 0 ? {\n        path: '',\n        severity: 'warning',\n        source: '',\n    } : _a, line = _b.line, column = _b.column, lineEnd = _b.lineEnd, columnEnd = _b.columnEnd, path = _b.path, payload = _b.payload, _c = _b.severity, severity = _c === void 0 ? 'warning' : _c, _d = _b.source, source = _d === void 0 ? '' : _d;\n    return {\n        message: message,\n        line: line,\n        column: column,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        path: path,\n        payload: payload,\n        severity: severity,\n        source: source,\n        type: 'action',\n        action: 'show-correction',\n    };\n}\nfunction clear$1(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-corrections',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar correction = Object.freeze({\n\tshow: show$2,\n\tclear: clear$1\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$3(_a) {\n    var line = _a.line, path = _a.path, className = _a.className;\n    return {\n        line: line,\n        path: path,\n        className: className,\n        type: 'action',\n        action: 'show-glyph',\n    };\n}\n\n\nvar glyph = Object.freeze({\n\tshow: show$3\n});\n\n// All actions of the editor are defined here. The sandbox can send messages\n// like `source.files.rename` which the editor will see as an action to rename\n// a module. This will allow plugins to alter project content in the future\nvar actions = {\n    notifications: notifications,\n    editor: editor,\n    source: source,\n    error: error,\n    correction: correction,\n    glyph: glyph,\n};\n\nvar host = typeof process !== 'undefined' && process.env.CODESANDBOX_HOST;\nvar host$1 = host || 'https://codesandbox.io';\n\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// import * as debug from 'debug';\nvar bundlers = new Map();\nfunction checkIsStandalone() {\n    if (typeof window === 'undefined') {\n        return true;\n    }\n    if (window.location && window.location.href.indexOf('?standalone') > -1) {\n        return true;\n    }\n    if (window.opener || window.parent !== window) {\n        if (window.location && window.location.href.indexOf(host$1) > -1) {\n            // If this location href is codesandbox.io or something, we're most probably in an embed\n            // iframed on another page. This means that we're actually standalone, but we're fooled\n            // by the fact that we're embedded somewhere else.\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\n// Whether the tab has a connection with the editor\nvar isStandalone = checkIsStandalone();\nvar resolveIframeHandshake;\nvar iframeHandshakeDone = false;\n/**\n * Resolves when the handshake between the frame and the editor has succeeded\n */\nvar iframeHandshake = new Promise(function (resolve) {\n    resolveIframeHandshake = resolve;\n});\n// Field used by a \"child\" frame to determine its parent origin\nvar parentOrigin = null;\nvar parentId = null;\nvar parentOriginListener = function (e) {\n    var _a;\n    if (e.data.type === 'register-frame' && !parentId) {\n        parentOrigin = e.data.origin;\n        parentId = (_a = e.data.id) !== null && _a !== void 0 ? _a : null;\n        if (!iframeHandshakeDone) {\n            resolveIframeHandshake();\n            iframeHandshakeDone = true;\n        }\n        self.removeEventListener('message', parentOriginListener);\n    }\n};\nif (typeof window !== 'undefined') {\n    self.addEventListener('message', parentOriginListener);\n}\nfunction resetState() {\n    parentOrigin = null;\n    bundlers.clear();\n}\n/**\n * Send a message to the editor, this is most probably an action you generated\n *\n * @export\n * @param {*} message\n * @returns\n */\nfunction dispatch(message) {\n    if (!message)\n        return;\n    var newMessage = __assign(__assign({}, message), { codesandbox: true });\n    if (parentId !== null) {\n        newMessage.$id = parentId;\n    }\n    notifyListeners(newMessage);\n    notifyFrames(newMessage);\n    if (isStandalone)\n        return;\n    if (parentOrigin === null && message.type !== 'initialized')\n        return;\n    if (window.opener) {\n        window.opener.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n    else {\n        window.parent.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n}\nvar listeners = {};\nvar listenerId = 0;\n/**\n * Listen to everything that comes in from either the editor or the sandbox\n * @param callback Call this function to 'unlisten'\n */\nfunction listen(callback) {\n    var id = ++listenerId;\n    listeners[id] = callback;\n    return function () {\n        delete listeners[id];\n    };\n}\nfunction notifyListeners(data, source) {\n    // eslint-disable-next-line no-shadow\n    Object.keys(listeners).forEach(function (listenerId) {\n        if (listeners[listenerId]) {\n            try {\n                listeners[listenerId](data, source);\n            }\n            catch (e) {\n                /**/\n            }\n        }\n    });\n}\nfunction notifyFrames(message) {\n    var rawMessage = JSON.parse(JSON.stringify(message));\n    bundlers.forEach(function (origin, frame) {\n        if (frame && frame.postMessage) {\n            frame.postMessage(__assign(__assign({}, rawMessage), { codesandbox: true }), origin);\n        }\n    });\n}\nfunction eventListener(e) {\n    if (e.data.type === 'initialized' || isStandalone) {\n        // iframe handshake is auto-resolved in the parent, only the child needs to wait for it\n        // we detect the parent either by the \"initialized\" message which only the parent receives\n        // or by the \"isStandalone\" flag which works for codesandbox.io and when sandpack is not inside an iframe\n        iframeHandshakeDone = true;\n    }\n    if (!iframeHandshakeDone) {\n        return;\n    }\n    var data = e.data;\n    if (data &&\n        data.codesandbox &&\n        (parentOrigin === null || e.origin === parentOrigin) &&\n        (data.$id == null || parentId === null || parentId === data.$id)) {\n        notifyListeners(data, e.source);\n    }\n}\n/**\n * Register an window as a output the `dispatch` function can send messages to.\n *\n * @param frame\n */\nfunction registerFrame(frame, origin, bundlerId) {\n    bundlers.set(frame, origin);\n    frame.postMessage({\n        type: 'register-frame',\n        origin: document.location.origin,\n        id: bundlerId,\n    }, origin);\n}\nif (typeof window !== 'undefined') {\n    window.addEventListener('message', eventListener);\n}\nfunction reattach() {\n    window.addEventListener('message', eventListener);\n}\n\n// Errors\n\nexport { Protocol, transformError, clearErrorTransformers, registerErrorTransformer, actions, isStandalone, iframeHandshake, resetState, dispatch, listen, notifyListeners, registerFrame, reattach };\n//# sourceMappingURL=codesandbox.es5.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isServer = void 0;\nconst SERVER_TEMPLATE_NAMES = [\n    'adonis',\n    'apollo',\n    'docusaurus',\n    'ember',\n    'gatsby',\n    'gridsome',\n    'marko',\n    'mdx-deck',\n    'nest',\n    'next',\n    'node',\n    'nuxt',\n    'quasar',\n    'remix',\n    'sapper',\n    'styleguidist',\n    'unibit',\n    'vuepress',\n];\nconst isServer = (template) => SERVER_TEMPLATE_NAMES.indexOf(template) !== -1;\nexports.isServer = isServer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.v2DraftBranchUrl = exports.v2DefaultBranchUrl = exports.dashboard = exports.teamInviteLink = exports.docsUrl = exports.getSandboxId = exports.privacyUrl = exports.tosUrl = exports.curatorUrl = exports.searchUrl = exports.gitHubToProjectsUrl = exports.gitHubToSandboxUrl = exports.optionsToParameterizedUrl = exports.githubRepoUrl = exports.profileLikesUrl = exports.profileSandboxesUrl = exports.teamOverviewUrl = exports.exploreUrl = exports.dashboardUrl = exports.profileUrl = exports.signInVercelUrl = exports.signInUrl = exports.signInPageUrl = exports.forkSandboxUrl = exports.frameUrl = exports.embedUrl = exports.v2BranchUrl = exports.sandboxUrl = exports.v2EditorUrl = exports.editorUrl = exports.uploadFromCliUrl = exports.newCxJSSandboxUrl = exports.newAngularSandboxUrl = exports.newSvelteSandboxUrl = exports.importFromGitHubUrl = exports.newVueSandboxUrl = exports.newPreactSandboxUrl = exports.newDojoSandboxUrl = exports.newReactTypeScriptSandboxUrl = exports.parcelSandboxUrl = exports.newSandboxUrl = exports.newSandboxWizard = exports.protocolAndHost = exports.host = exports.CSBProjectGitHubRepository = exports.gitHubRepoPattern = void 0;\nconst is_server_1 = require(\"../templates/helpers/is-server\");\nconst dashboard = __importStar(require(\"./url-generator/dashboard\"));\nexports.dashboard = dashboard;\nexports.gitHubRepoPattern = /(https?:\\/\\/)?((www.)?)github.com(\\/[\\w-]+){2,}/;\nconst gitHubPrefix = /(https?:\\/\\/)?((www.)?)github.com/;\nconst dotGit = /(\\.git)$/;\nconst sandboxHost = {\n    'https://codesandbox.io': 'https://csb.app',\n    'https://codesandbox.stream': 'https://codesandbox.dev',\n};\nconst CSBProjectGitHubRepository = ({ owner, repo, }) => {\n    const origin = process.env.STAGING_API\n        ? 'https://codesandbox.stream'\n        : 'https://codesandbox.io';\n    return `${origin}/p/github/${owner}/${repo}?create=true`;\n};\nexports.CSBProjectGitHubRepository = CSBProjectGitHubRepository;\nconst buildEncodedUri = (strings, ...values) => strings[0] +\n    values\n        .map((value, i) => `${encodeURIComponent(value)}${strings[i + 1]}`)\n        .join('');\nconst REGEX = /(?<id>\\w{5,6})-(?<port>\\d{1,5})\\.(?<hostname>.*)/;\nfunction getCodeSandboxDevHost(port) {\n    if (typeof window === 'undefined') {\n        // eslint-disable-next-line global-require\n        const hostname = require('os').hostname();\n        return `${hostname}-${port}.preview.csb.app`;\n    }\n    const currentUrl = location.host;\n    const currentMatch = currentUrl.match(REGEX);\n    if (!(currentMatch === null || currentMatch === void 0 ? void 0 : currentMatch.groups)) {\n        return undefined;\n    }\n    const { id, hostname } = currentMatch.groups;\n    if (!id || !port || !hostname) {\n        return undefined;\n    }\n    return `${id}-${port}.${hostname}`;\n}\nconst host = () => {\n    if (process.env.CSB && getCodeSandboxDevHost(3000)) {\n        return getCodeSandboxDevHost(3000);\n    }\n    if (process.env.NODE_ENV === 'production') {\n        return process.env.CODESANDBOX_HOST.split('//')[1];\n    }\n    if (process.env.LOCAL_SERVER) {\n        return 'localhost:3000';\n    }\n    return process.env.DEV_DOMAIN;\n};\nexports.host = host;\nconst protocolAndHost = () => `${location.protocol}//${exports.host()}`;\nexports.protocolAndHost = protocolAndHost;\nconst newSandboxWizard = () => `/s`;\nexports.newSandboxWizard = newSandboxWizard;\nconst newSandboxUrl = () => `/s/new`;\nexports.newSandboxUrl = newSandboxUrl;\nconst parcelSandboxUrl = () => `/s/vanilla`;\nexports.parcelSandboxUrl = parcelSandboxUrl;\nconst newReactTypeScriptSandboxUrl = () => `/s/react-ts`;\nexports.newReactTypeScriptSandboxUrl = newReactTypeScriptSandboxUrl;\nconst newDojoSandboxUrl = () => `/s/github/dojo/dojo-codesandbox-template`;\nexports.newDojoSandboxUrl = newDojoSandboxUrl;\nconst newPreactSandboxUrl = () => `/s/preact`;\nexports.newPreactSandboxUrl = newPreactSandboxUrl;\nconst newVueSandboxUrl = () => `/s/vue`;\nexports.newVueSandboxUrl = newVueSandboxUrl;\nconst importFromGitHubUrl = () => `/s/github`;\nexports.importFromGitHubUrl = importFromGitHubUrl;\nconst newSvelteSandboxUrl = () => `/s/svelte`;\nexports.newSvelteSandboxUrl = newSvelteSandboxUrl;\nconst newAngularSandboxUrl = () => `/s/angular`;\nexports.newAngularSandboxUrl = newAngularSandboxUrl;\nconst newCxJSSandboxUrl = () => `/s/github/codaxy/cxjs-codesandbox-template`;\nexports.newCxJSSandboxUrl = newCxJSSandboxUrl;\nconst uploadFromCliUrl = () => `/s/cli`;\nexports.uploadFromCliUrl = uploadFromCliUrl;\nconst sandboxGitUrl = (git) => buildEncodedUri `github/${git.username}/${git.repo}/tree/${git.branch}/` +\n    git.path;\nconst editorUrl = () => `/s/`;\nexports.editorUrl = editorUrl;\nconst v2EditorUrl = () => `/p/`;\nexports.v2EditorUrl = v2EditorUrl;\nconst sandboxUrl = (sandboxDetails) => {\n    if (sandboxDetails.git) {\n        const { git } = sandboxDetails;\n        return `${exports.editorUrl()}${sandboxGitUrl(git)}`;\n    }\n    const baseUrl = sandboxDetails.isV2\n        ? `${exports.v2EditorUrl()}sandbox/`\n        : exports.editorUrl();\n    if (sandboxDetails.alias) {\n        return `${baseUrl}${sandboxDetails.alias}`;\n    }\n    return `${baseUrl}${sandboxDetails.id}`;\n};\nexports.sandboxUrl = sandboxUrl;\nconst v2BranchUrl = (branchDetails) => {\n    const { name: branchName, project: { repository }, } = branchDetails;\n    return `${exports.v2EditorUrl()}github/${repository.owner}/${repository.name}/${branchName}`;\n};\nexports.v2BranchUrl = v2BranchUrl;\nconst embedUrl = (sandbox) => {\n    if (sandbox.git) {\n        const { git } = sandbox;\n        return `/embed/${sandboxGitUrl(git)}`;\n    }\n    if (sandbox.alias) {\n        return `/embed/${sandbox.alias}`;\n    }\n    return `/embed/${sandbox.id}`;\n};\nexports.embedUrl = embedUrl;\nconst stagingFrameUrl = (shortid, path) => {\n    const stagingHost = (process.env.CODESANDBOX_HOST\n        ? process.env.CODESANDBOX_HOST\n        : '').split('//')[1];\n    const segments = stagingHost.split('.');\n    const first = segments.shift();\n    return `${location.protocol}//${first}-${shortid}.${segments.join('.')}/${path}`;\n};\nconst frameUrl = (sandbox, append = '', { useFallbackDomain = false, port = undefined, } = {}) => {\n    const path = append.indexOf('/') === 0 ? append.substr(1) : append;\n    const templateIsServer = is_server_1.isServer(sandbox.template);\n    if (process.env.LOCAL_SERVER) {\n        if (templateIsServer) {\n            return `${location.protocol}//${sandbox.id}${port ? `-${port}` : ''}.${templateIsServer ? 'sse.' : ''}${process.env.STAGING_API ? 'codesandbox.stream' : 'codesandbox.io'}/${path}`;\n        }\n        return `http://localhost:3002/${path}`;\n    }\n    if (process.env.STAGING) {\n        return stagingFrameUrl(sandbox.id, path);\n    }\n    let sHost = exports.host();\n    if (`https://${sHost}` in sandboxHost &&\n        !useFallbackDomain &&\n        !templateIsServer) {\n        sHost = sandboxHost[`https://${sHost}`].split('//')[1];\n    }\n    return `${location.protocol}//${sandbox.id}${port ? `-${port}` : ''}.${templateIsServer ? 'sse.' : ''}${sHost}/${path}`;\n};\nexports.frameUrl = frameUrl;\nconst forkSandboxUrl = (sandbox) => `${exports.sandboxUrl(sandbox)}/fork`;\nexports.forkSandboxUrl = forkSandboxUrl;\nconst signInPageUrl = (redirectTo) => {\n    let url = `/signin`;\n    if (redirectTo) {\n        url += '?continue=' + redirectTo;\n    }\n    return url;\n};\nexports.signInPageUrl = signInPageUrl;\nconst signInUrl = (extraScopes = false) => '/auth/github' +\n    (extraScopes ? '?scope=user:email,public_repo,workflow' : '');\nexports.signInUrl = signInUrl;\nconst signInVercelUrl = () => '/auth/vercel';\nexports.signInVercelUrl = signInVercelUrl;\nconst profileUrl = (username) => `/u/${username}`;\nexports.profileUrl = profileUrl;\nconst dashboardUrl = () => `/dashboard`;\nexports.dashboardUrl = dashboardUrl;\nconst exploreUrl = () => `/explore`;\nexports.exploreUrl = exploreUrl;\nconst teamOverviewUrl = (teamId) => `/dashboard/teams/${teamId}`;\nexports.teamOverviewUrl = teamOverviewUrl;\nconst profileSandboxesUrl = (username, page) => `${exports.profileUrl(username)}/sandboxes${page ? `/${page}` : ''}`;\nexports.profileSandboxesUrl = profileSandboxesUrl;\nconst profileLikesUrl = (username, page) => `${exports.profileUrl(username)}/likes${page ? `/${page}` : ''}`;\nexports.profileLikesUrl = profileLikesUrl;\nconst githubRepoUrl = ({ repo, branch, username, path, }) => buildEncodedUri `https://github.com/${username}/${repo}/tree/${branch}/` +\n    path;\nexports.githubRepoUrl = githubRepoUrl;\nconst optionsToParameterizedUrl = (options) => {\n    const keyValues = Object.keys(options)\n        .sort()\n        .filter(a => options[a])\n        .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(options[key])}`)\n        .join('&');\n    return keyValues ? `?${keyValues}` : '';\n};\nexports.optionsToParameterizedUrl = optionsToParameterizedUrl;\nconst gitHubToSandboxUrl = (githubUrl) => githubUrl.replace(gitHubPrefix, '/s/github').replace(dotGit, '');\nexports.gitHubToSandboxUrl = gitHubToSandboxUrl;\nconst gitHubToProjectsUrl = (githubUrl) => githubUrl.replace(gitHubPrefix, '/p/github').replace(dotGit, '');\nexports.gitHubToProjectsUrl = gitHubToProjectsUrl;\nconst searchUrl = (query) => `/search${query ? `?query=${query}` : ''}`;\nexports.searchUrl = searchUrl;\nconst curatorUrl = () => `/curator`;\nexports.curatorUrl = curatorUrl;\nconst tosUrl = () => `/legal/terms`;\nexports.tosUrl = tosUrl;\nconst privacyUrl = () => `/legal/privacy`;\nexports.privacyUrl = privacyUrl;\nfunction getSandboxId() {\n    const csbHost = process.env.CODESANDBOX_HOST;\n    if (process.env.LOCAL_SERVER) {\n        return document.location.hash.replace('#', '');\n    }\n    if (process.env.STAGING) {\n        const segments = csbHost.split('//')[1].split('.');\n        const first = segments.shift();\n        const re = RegExp(`${first}-(.*)\\\\.${segments.join('\\\\.')}`);\n        return document.location.host.match(re)[1];\n    }\n    let result;\n    [csbHost, sandboxHost[csbHost]].filter(Boolean).forEach(tryHost => {\n        const hostRegex = tryHost.replace(/https?:\\/\\//, '').replace(/\\./g, '\\\\.');\n        const sandboxRegex = new RegExp(`(.*)\\\\.${hostRegex}`);\n        const matches = document.location.host.match(sandboxRegex);\n        if (matches) {\n            result = matches[1];\n        }\n    });\n    if (!result) {\n        throw new Error(`Can't detect sandbox ID from the current URL`);\n    }\n    return result;\n}\nexports.getSandboxId = getSandboxId;\nconst docsUrl = (path = '') => `https://codesandbox.io/docs${path}`;\nexports.docsUrl = docsUrl;\nconst teamInviteLink = (inviteToken) => `${exports.protocolAndHost()}/invite/${inviteToken}`;\nexports.teamInviteLink = teamInviteLink;\nconst v2DefaultBranchUrl = (owner, name, qsObject = {}) => {\n    const searchParams = new URLSearchParams(Object.assign({}, qsObject));\n    return `${exports.v2EditorUrl()}github/${owner}/${name}?${searchParams.toString()}`;\n};\nexports.v2DefaultBranchUrl = v2DefaultBranchUrl;\nconst v2DraftBranchUrl = (owner, name) => {\n    return `${exports.v2DefaultBranchUrl(owner, name, { create: 'true' })}`;\n};\nexports.v2DraftBranchUrl = v2DraftBranchUrl;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.discoverSearch = exports.discover = exports.search = exports.permissionSettings = exports.registrySettings = exports.settings = exports.liked = exports.shared = exports.deleted = exports.recent = exports.templates = exports.syncedSandboxes = exports.repository = exports.repositories = exports.myContributions = exports.drafts = exports.sandboxes = exports.ALL_SANDBOXES_URL_PREFIX = exports.DASHBOARD_URL_PREFIX = void 0;\nexports.DASHBOARD_URL_PREFIX = '/dashboard';\nexports.ALL_SANDBOXES_URL_PREFIX = `${exports.DASHBOARD_URL_PREFIX}/sandboxes`;\nfunction appendTeamIdQueryParam(url, teamId) {\n    if (teamId) {\n        return `${url}?workspace=${teamId}`;\n    }\n    return url;\n}\nfunction sanitizePath(path) {\n    return path\n        .split('/')\n        .map(p => p.split(' ').map(encodeURIComponent).join(' '))\n        .join('/');\n}\nconst sandboxes = (path, teamId) => appendTeamIdQueryParam(`${exports.ALL_SANDBOXES_URL_PREFIX}${sanitizePath(path)}`, teamId);\nexports.sandboxes = sandboxes;\nconst drafts = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/drafts`, teamId);\nexports.drafts = drafts;\nconst myContributions = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/my-contributions`, teamId);\nexports.myContributions = myContributions;\nconst repositories = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/repositories`, teamId);\nexports.repositories = repositories;\nconst repository = ({ owner, name, teamId, }) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/repositories/github/${owner}/${name}`, teamId);\nexports.repository = repository;\nconst syncedSandboxes = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/synced-sandboxes`, teamId);\nexports.syncedSandboxes = syncedSandboxes;\nconst templates = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/templates`, teamId);\nexports.templates = templates;\nconst recent = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/recent`, teamId);\nexports.recent = recent;\nconst deleted = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/deleted`, teamId);\nexports.deleted = deleted;\nconst shared = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/shared`, teamId);\nexports.shared = shared;\nconst liked = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/liked`, teamId);\nexports.liked = liked;\nconst settings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings`, teamId);\nexports.settings = settings;\nconst registrySettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/npm-registry`, teamId);\nexports.registrySettings = registrySettings;\nconst permissionSettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/permissions`, teamId);\nexports.permissionSettings = permissionSettings;\nconst search = (query, teamId) => {\n    let searchUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/search`, teamId);\n    if (searchUrl.includes('?')) {\n        searchUrl += '&';\n    }\n    else {\n        searchUrl += '?';\n    }\n    searchUrl += `query=${query}`;\n    return searchUrl;\n};\nexports.search = search;\nconst discover = (teamId, albumId) => {\n    if (albumId) {\n        return appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover/${albumId}`, teamId);\n    }\n    return appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover`, teamId);\n};\nexports.discover = discover;\nconst discoverSearch = (query, teamId) => {\n    let searchUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover/search`, teamId);\n    if (searchUrl.includes('?'))\n        searchUrl += '&';\n    else\n        searchUrl += '?';\n    searchUrl += `query=${query}`;\n    return searchUrl;\n};\nexports.discoverSearch = discoverSearch;\n","import { protocolAndHost } from '@codesandbox/common/lib/utils/url-generator';\n\nconst PREVIEW_SECRET_COOKIE_NAME = 'csb_sandbox_secret';\n\nexport const getPreviewSecret = () =>\n  document.cookie.replace(\n    new RegExp(\n      `(?:(?:^|.*;\\\\s*)${PREVIEW_SECRET_COOKIE_NAME}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`\n    ),\n    '$1'\n  );\n\nexport const setPreviewSecret = secret => {\n  if (secret === null) {\n    return;\n  }\n\n  const cookieValue = getPreviewSecret();\n  if (\n    (cookieValue && !secret) ||\n    (secret && !cookieValue) ||\n    cookieValue !== secret\n  ) {\n    if (secret) {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=${secret};samesite=none;secure;`;\n\n      setTimeout(() => {\n        location.reload();\n      }, 1000);\n    } else {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n    }\n  }\n};\n\nexport const listenForPreviewSecret = () => {\n  const listener = data => {\n    if (data.data && data.data.$type === 'preview-secret') {\n      const { previewSecret } = data.data;\n      setPreviewSecret(previewSecret);\n    }\n  };\n\n  window.addEventListener('message', listener);\n\n  return () => {\n    window.removeEventListener('message', listener);\n  };\n};\n\nfunction getPopupOffset({ width, height }) {\n  const wLeft = window.screenLeft ? window.screenLeft : window.screenX;\n  const wTop = window.screenTop ? window.screenTop : window.screenY;\n\n  const left = wLeft + window.innerWidth / 2 - width / 2;\n  const top = wTop + window.innerHeight / 2 - height / 2;\n\n  return { top, left };\n}\n\nfunction getPopupSize() {\n  return { width: 1020, height: 618 };\n}\n\nfunction getPopupDimensions() {\n  const { width, height } = getPopupSize();\n  const { top, left } = getPopupOffset({ width, height });\n\n  return `width=${width},height=${height},top=${top},left=${left}`;\n}\n\n/**\n * This helper function is purely there to also work when we're building\n * for SSE, which means that the env vars are not set and we thus don't\n * know the host.\n */\nfunction getProtocolAndHostWithSSE() {\n  if (process.env.CODESANDBOX_HOST) {\n    return protocolAndHost();\n  }\n\n  if (document.location.host.endsWith('.stream')) {\n    return 'https://codesandbox.stream';\n  }\n\n  return 'https://codesandbox.io';\n}\n\nexport const requestPreviewSecretFromApp = sandboxId => {\n  const host = getProtocolAndHostWithSSE();\n  const popup = window.open(\n    host + '/auth/sandbox/' + sandboxId,\n    name,\n    `scrollbars=no,toolbar=no,location=no,titlebar=no,directories=no,status=no,menubar=no, ${getPopupDimensions()}`\n  );\n\n  setInterval(() => {\n    popup.postMessage({ $type: 'request-preview-secret' }, host);\n  }, 500);\n\n  const listener = e => {\n    if (e.data && e.data.$type === 'preview-secret') {\n      setPreviewSecret(e.data.previewSecret);\n      window.removeEventListener('message', listener);\n\n      popup.close();\n    }\n  };\n  window.addEventListener('message', listener);\n};\n"],"sourceRoot":""}